<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Frequently Asked Questions</title><link rel="stylesheet" href="reference.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.61.3"><link rel="home" href="index.html" title="The Boost C++ Libraries"><link rel="up" href="function.html" title="Boost.Function"><link rel="previous" href="class.boost.function.html" title="Class template function"><link rel="next" href="function.misc.html" title="Miscellaneous Notes"><link rel="chapter" href="libraries.html" title="The Boost C++ Libraries"><link rel="chapter" href="any.html" title="Boost.Any"><link rel="refentry" href="class.boost.bad_any_cast.html" title="Class bad_any_cast"><link rel="refentry" href="class.boost.any.html" title="Class any"><link rel="refentry" href="id2383300-bb.html" title="Function any_cast"><link rel="chapter" href="array.html" title="Boost.Array"><link rel="refentry" href="class.boost.array.html" title="Class template array"><link rel="chapter" href="function.html" title="Boost.Function"><link rel="refentry" href="class.boost.bad_function_call.html" title="Class bad_function_call"><link rel="refentry" href="class.boost.function_base.html" title="Class function_base"><link rel="refentry" href="class.boost.functionN.html" title="Class template functionN"><link rel="refentry" href="class.boost.function.html" title="Class template function"><link rel="chapter" href="ref.html" title="Boost.Ref"><link rel="refentry" href="class.boost.reference_wrapper.html" title="Class template reference_wrapper"><link rel="refentry" href="class.boost.is_reference_wrapper.html" title="Class template is_reference_wrapper"><link rel="refentry" href="class.boost.unwrap_reference.html" title="Class template unwrap_reference"><link rel="chapter" href="signals.html" title="Boost.Signals"><link rel="refentry" href="class.boost.signalN.html" title="Class template signalN"><link rel="refentry" href="class.boost.signal.html" title="Class template signal"><link rel="refentry" href="class.boost.slot.html" title="Class template slot"><link rel="refentry" href="class.boost.signals.trackable.html" title="Class trackable"><link rel="refentry" href="class.boost.signals.connection.html" title="Class connection"><link rel="refentry" href="class.boost.signals.scoped_connection.html" title="Class scoped_connection"><link rel="refentry" href="id2532119-bb.html" title="Function template visit_each"><link rel="refentry" href="class.boost.last_value.html" title="Class template last_value"><link rel="refentry" href="id2354683-bb.html" title="Class last_value&lt;void&gt;"><link rel="chapter" href="variant.html" title="Boost.Variant"><link rel="refentry" href="BOOST_VARIANT_LIMIT_TYPES.html" title="Macro BOOST_VARIANT_LIMIT_TYPES"><link rel="refentry" href="BOOST_VARIANT_ENUM_PARAMS.html" title="Macro BOOST_VARIANT_ENUM_PARAMS"><link rel="refentry" href="BOOST_VARIANT_ENUM_SHIFTED_PARAMS.html" title="Macro BOOST_VARIANT_ENUM_SHIFTED_PARAMS"><link rel="refentry" href="BOOST_VARIANT_NO_REFERENCE_SUPPORT.html" title="Macro BOOST_VARIANT_NO_REFERENCE_SUPPORT"><link rel="refentry" href="BOOST_VARIANT_NO_TYPE_SEQUENCE_SUPPORT.html" title="Macro BOOST_VARIANT_NO_TYPE_SEQUENCE_SUPPORT"><link rel="refentry" href="BOOST_VARIANT_NO_FULL_RECURSIVE_VARIANT_SUPPORT.html" title="Macro BOOST_VARIANT_NO_FULL_RECURSIVE_VARIANT_SUPPORT"><link rel="refentry" href="class.boost.variant.html" title="Class template variant"><link rel="refentry" href="id2518553-bb.html" title="Function template swap"><link rel="refentry" href="id2524211-bb.html" title="Function template operator&lt;&lt;"><link rel="refentry" href="class.boost.make_variant_over.html" title="Class template make_variant_over"><link rel="refentry" href="class.boost.make_recursive_variant.html" title="Class template make_recursive_variant"><link rel="refentry" href="class.boost.make_recursive_variant_over.html" title="Class template make_recursive_variant_over"><link rel="refentry" href="class.boost.recursive_wrapper.html" title="Class template recursive_wrapper"><link rel="refentry" href="class.boost.is_recursive_wrapper.html" title="Class template is_recursive_wrapper"><link rel="refentry" href="class.boost.unwrap_recursive_wrapper.html" title="Class template unwrap_recursive_wrapper"><link rel="refentry" href="class.boost.apply_visitor_delayed_t.html" title="Class template apply_visitor_delayed_t"><link rel="refentry" href="id2557051-bb.html" title="Function apply_visitor"><link rel="refentry" href="class.boost.bad_get.html" title="Class bad_get"><link rel="refentry" href="id2493238-bb.html" title="Function get"><link rel="refentry" href="class.boost.bad_visit.html" title="Class bad_visit"><link rel="refentry" href="class.boost.static_visitor.html" title="Class template static_visitor"><link rel="refentry" href="class.boost.visitor_ptr_t.html" title="Class template visitor_ptr_t"><link rel="refentry" href="id2544445-bb.html" title="Function template visitor_ptr"><link rel="chapter" href="boostbook.html" title="The BoostBook Documentation Format"><link rel="refentry" href="boostbook.dtd.class-specialization.html" title="
          BoostBook element class-specialization"><link rel="refentry" href="boostbook.dtd.link-test.html" title="
          BoostBook element link-test"><link rel="refentry" href="boostbook.dtd.link-fail-test.html" title="
          BoostBook element link-fail-test"><link rel="refentry" href="boostbook.dtd.typedef.html" title="
          BoostBook element typedef"><link rel="refentry" href="boostbook.dtd.static-constant.html" title="
          BoostBook element static-constant"><link rel="refentry" href="boostbook.dtd.code.html" title="
          BoostBook element code"><link rel="refentry" href="boostbook.dtd.destructor.html" title="
          BoostBook element destructor"><link rel="refentry" href="boostbook.dtd.template-type-parameter.html" title="
          BoostBook element template-type-parameter"><link rel="refentry" href="boostbook.dtd.description.html" title="
          BoostBook element description"><link rel="refentry" href="boostbook.dtd.librarylist.html" title="
          BoostBook element librarylist"><link rel="refentry" href="boostbook.dtd.library-reference.html" title="
          BoostBook element library-reference"><link rel="refentry" href="boostbook.dtd.boostbook.html" title="
          BoostBook element boostbook"><link rel="refentry" href="boostbook.dtd.union.html" title="
          BoostBook element union"><link rel="refentry" href="boostbook.dtd.inherit.html" title="
          BoostBook element inherit"><link rel="refentry" href="boostbook.dtd.template-varargs.html" title="
          BoostBook element template-varargs"><link rel="refentry" href="boostbook.dtd.source.html" title="
          BoostBook element source"><link rel="refentry" href="boostbook.dtd.function.html" title="
          BoostBook element function"><link rel="refentry" href="boostbook.dtd.postconditions.html" title="
          BoostBook element postconditions"><link rel="refentry" href="boostbook.dtd.compile-test.html" title="
          BoostBook element compile-test"><link rel="refentry" href="boostbook.dtd.method.html" title="
          BoostBook element method"><link rel="refentry" href="boostbook.dtd.snippet.html" title="
          BoostBook element snippet"><link rel="refentry" href="boostbook.dtd.constructor.html" title="
          BoostBook element constructor"><link rel="refentry" href="boostbook.dtd.namespace.html" title="
          BoostBook element namespace"><link rel="refentry" href="boostbook.dtd.if-fails.html" title="
          BoostBook element if-fails"><link rel="refentry" href="boostbook.dtd.free-function-group.html" title="
          BoostBook element free-function-group"><link rel="refentry" href="boostbook.dtd.functionname.html" title="
          BoostBook element functionname"><link rel="refentry" href="boostbook.dtd.librarycategory.html" title="
          BoostBook element librarycategory"><link rel="refentry" href="boostbook.dtd.notes.html" title="
          BoostBook element notes"><link rel="refentry" href="boostbook.dtd.data-member.html" title="
          BoostBook element data-member"><link rel="refentry" href="boostbook.dtd.specialization.html" title="
          BoostBook element specialization"><link rel="refentry" href="boostbook.dtd.union-specialization.html" title="
          BoostBook element union-specialization"><link rel="refentry" href="boostbook.dtd.throws.html" title="
          BoostBook element throws"><link rel="refentry" href="boostbook.dtd.template-arg.html" title="
          BoostBook element template-arg"><link rel="refentry" href="boostbook.dtd.method-group.html" title="
          BoostBook element method-group"><link rel="refentry" href="boostbook.dtd.requirement.html" title="
          BoostBook element requirement"><link rel="refentry" href="boostbook.dtd.precondition.html" title="
          BoostBook element precondition"><link rel="refentry" href="boostbook.dtd.paramtype.html" title="
          BoostBook element paramtype"><link rel="refentry" href="boostbook.dtd.using-class.html" title="
          BoostBook element using-class"><link rel="refentry" href="boostbook.dtd.run-test.html" title="
          BoostBook element run-test"><link rel="refentry" href="boostbook.dtd.librarypurpose.html" title="
          BoostBook element librarypurpose"><link rel="refentry" href="boostbook.dtd.copy-assignment.html" title="
          BoostBook element copy-assignment"><link rel="refentry" href="boostbook.dtd.run-fail-test.html" title="
          BoostBook element run-fail-test"><link rel="refentry" href="boostbook.dtd.template.html" title="
          BoostBook element template"><link rel="refentry" href="boostbook.dtd.compile-fail-test.html" title="
          BoostBook element compile-fail-test"><link rel="refentry" href="boostbook.dtd.returns.html" title="
          BoostBook element returns"><link rel="refentry" href="boostbook.dtd.default.html" title="
          BoostBook element default"><link rel="refentry" href="boostbook.dtd.parameter.html" title="
          BoostBook element parameter"><link rel="refentry" href="boostbook.dtd.signature.html" title="
          BoostBook element signature"><link rel="refentry" href="boostbook.dtd.overloaded-function.html" title="
          BoostBook element overloaded-function"><link rel="refentry" href="boostbook.dtd.class.html" title="
          BoostBook element class"><link rel="refentry" href="boostbook.dtd.librarycategorydef.html" title="
          BoostBook element librarycategorydef"><link rel="refentry" href="boostbook.dtd.type.html" title="
          BoostBook element type"><link rel="refentry" href="boostbook.dtd.enumvalue.html" title="
          BoostBook element enumvalue"><link rel="refentry" href="boostbook.dtd.overloaded-method.html" title="
          BoostBook element overloaded-method"><link rel="refentry" href="boostbook.dtd.programlisting.html" title="
          BoostBook element programlisting"><link rel="refentry" href="boostbook.dtd.complexity.html" title="
          BoostBook element complexity"><link rel="refentry" href="boostbook.dtd.purpose.html" title="
          BoostBook element purpose"><link rel="refentry" href="boostbook.dtd.template-nontype-parameter.html" title="
          BoostBook element template-nontype-parameter"><link rel="refentry" href="boostbook.dtd.library.html" title="
          BoostBook element library"><link rel="refentry" href="boostbook.dtd.librarycategorylist.html" title="
          BoostBook element librarycategorylist"><link rel="refentry" href="boostbook.dtd.using-namespace.html" title="
          BoostBook element using-namespace"><link rel="refentry" href="boostbook.dtd.struct-specialization.html" title="
          BoostBook element struct-specialization"><link rel="refentry" href="boostbook.dtd.struct.html" title="
          BoostBook element struct"><link rel="refentry" href="boostbook.dtd.lib.html" title="
          BoostBook element lib"><link rel="refentry" href="boostbook.dtd.enum.html" title="
          BoostBook element enum"><link rel="refentry" href="boostbook.dtd.requires.html" title="
          BoostBook element requires"><link rel="refentry" href="boostbook.dtd.effects.html" title="
          BoostBook element effects"><link rel="refentry" href="boostbook.dtd.libraryname.html" title="
          BoostBook element libraryname"><link rel="refentry" href="boostbook.dtd.libraryinfo.html" title="
          BoostBook element libraryinfo"><link rel="refentry" href="boostbook.dtd.testsuite.html" title="
          BoostBook element testsuite"><link rel="refentry" href="boostbook.dtd.header.html" title="
          BoostBook element header"><link rel="refentry" href="boostbook.dtd.rationale.html" title="
          BoostBook element rationale"><link rel="refentry" href="Assignable.html" title="Concept Assignable"><link rel="refentry" href="InputIterator.html" title="Concept InputIterator"><link rel="refentry" href="OutputIterator.html" title="Concept OutputIterator"><link rel="refentry" href="ForwardIterator.html" title="Concept ForwardIterator"><link rel="refentry" href="BidirectionalIterator.html" title="Concept BidirectionalIterator"><link rel="refentry" href="RandomAccessIterator.html" title="Concept RandomAccessIterator"><link rel="refentry" href="DefaultConstructible.html" title="Concept DefaultConstructible"><link rel="refentry" href="CopyConstructible.html" title="Concept CopyConstructible"><link rel="refentry" href="EqualityComparable.html" title="Concept EqualityComparable"><link rel="refentry" href="LessThanComparable.html" title="Concept LessThanComparable"><link rel="refentry" href="SignedInteger.html" title="Concept SignedInteger"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" border="1" cellpadding="2" bgcolor="#007F7F"><tr><td bgcolor="#FFFFFF"><img src="../../c++boost.gif" alt="c++boost.gif (8819 bytes)" width="277" height="86"></td><td><a href="../../index.htm"><font color="#FFFFFF" size="4" face="Arial">Home</font></a></td><td><a href="libraries.html"><font color="#FFFFFF" size="4" face="Arial">Libraries</font></a></td><td><a href="../../people/people.htm"><font color="#FFFFFF" size="4" face="Arial">People</font></a></td><td><a href="../../more/faq.htm"><font color="#FFFFFF" size="4" face="Arial">FAQ</font></a></td><td><a href="../../more/index.htm"><font color="#FFFFFF" size="4" face="Arial">More</font></a></td></tr></table><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="function.faq"></a>Frequently Asked Questions</h3></div></div><div></div></div><div class="qandaset"><table border="0" summary="Q and A Set"><col align="left" width="1%"><tbody><tr class="question"><td align="left" valign="top"><a name="id2517098"></a><a name="id2517099"></a><b>1. </b></td><td align="left" valign="top"><p>Why can't I compare
    <a href="class.boost.function.html" title="Class template function">boost::function</a> objects with
    <tt class="computeroutput">operator==</tt> or
    <tt class="computeroutput">operator!=</tt>?</p></td></tr><tr class="answer"><td align="left" valign="top"><b></b></td><td align="left" valign="top"><p>Comparison between <a href="class.boost.function.html" title="Class template function">boost::function</a>
      objects cannot be implemented "well", and therefore will not be
      implemented. The typical semantics requested for <tt class="computeroutput">f ==
      g</tt> given <a href="class.boost.function.html" title="Class template function">boost::function</a> objects
      <tt class="computeroutput">f</tt> and <tt class="computeroutput">g</tt> are:</p><div class="itemizedlist"><ul type="disc"><li>If <tt class="computeroutput">f</tt> and <tt class="computeroutput">g</tt>
          store function objects of the same type, use that type's
          <tt class="computeroutput">operator==</tt> to compare
          them.</li><li>If <tt class="computeroutput">f</tt> and <tt class="computeroutput">g</tt>
          store function objects of different types, return
          <tt class="computeroutput">false</tt>.</li></ul></div><p>The problem occurs when the type of the function objects
      stored by both <tt class="computeroutput">f</tt> and <tt class="computeroutput">g</tt> doesn't have an
      <tt class="computeroutput">operator==</tt>: we would like the expression <tt class="computeroutput">f ==
      g</tt> to fail to compile, as occurs with, e.g., the standard
      containers. However, this is not implementable for
      <a href="class.boost.function.html" title="Class template function">boost::function</a> because it necessarily
      "erases" some type information after it has been assigned a
      function object, so it cannot try to call
      <tt class="computeroutput">operator==</tt> later: it must either find a way to call
      <tt class="computeroutput">operator==</tt> now, or it will never be able to call it
      later. Note, for instance, what happens if you try to put a
      <tt class="computeroutput">float</tt> value into a
      <a href="class.boost.function.html" title="Class template function">boost::function</a> object: you will get an
      error at the assignment operator or constructor, not in
      <tt class="computeroutput">operator()</tt>, because the function-call expression
      must be bound in the constructor or assignment operator.</p><p>The most promising approach is to find a method of
      determining if <tt class="computeroutput">operator==</tt> can be called for a
      particular type, and then supporting it only when it is
      available; in other situations, an exception would be
      thrown. However, to date there is no known way to detect if an
      arbitrary operator expression <tt class="computeroutput">f == g</tt> is suitably
      defined. The best solution known has the following undesirable
      qualities:</p><div class="orderedlist"><ol type="1"><li>Fails at compile-time for objects where
        <tt class="computeroutput">operator==</tt> is not accessible (e.g., because it is
        <tt class="computeroutput">private</tt>).</li><li>Fails at compile-time if calling
        <tt class="computeroutput">operator==</tt> is ambiguous.</li><li>Appears to be correct if the
        <tt class="computeroutput">operator==</tt> declaration is correct, even though
        <tt class="computeroutput">operator==</tt> may not compile.</li></ol></div><p>All of these problems translate into failures in the
      <a href="class.boost.function.html" title="Class template function">boost::function</a> constructors or
      assignment operator, <span class="emphasis"><em>even if the user never invokes
      operator==</em></span>. We can't do that to users.</p><p>The other option is to place the burden on users that want
      to use <tt class="computeroutput">operator==</tt>, e.g., by providing an
      <tt class="computeroutput">is_equality_comparable</tt> trait they may
      specialize. This is a workable solution, but is dangerous in
      practice, because forgetting to specialize the trait will result
      in unexpected exceptions being thrown from
      <a href="class.boost.function.html" title="Class template function">boost::function</a>'s
      <tt class="computeroutput">operator==</tt>. This essentially negates the usefulness
      of <tt class="computeroutput">operator==</tt> in the context in which it is most
      desired: multitarget callbacks. The
      <a href="signals.html" title="Boost.Signals">Signals</a> library has a way around
      this.</p></td></tr><tr class="question"><td align="left" valign="top"><a name="id2517410"></a><a name="id2517411"></a><b>2. </b></td><td align="left" valign="top"><p>I see void pointers; is this [mess] type safe?</p></td></tr><tr class="answer"><td align="left" valign="top"><b></b></td><td align="left" valign="top"><p>Yes, <tt class="computeroutput">boost::function</tt> is type
safe even though it uses void pointers and pointers to functions
returning void and taking no arguments. Essentially, all type
information is encoded in the functions that manage and invoke
function pointers and function objects. Only these functions are
instantiated with the exact type that is pointed to by the void
pointer or pointer to void function. The reason that both are required
is that one may cast between void pointers and object pointers safely
or between different types of function pointers (provided you don't
invoke a function pointer with the wrong type).  </p></td></tr><tr class="question"><td align="left" valign="top"><a name="id2517434"></a><a name="id2517435"></a><b>3. </b></td><td align="left" valign="top"><p>Why are there workarounds for void returns? C++ allows them!</p></td></tr><tr class="answer"><td align="left" valign="top"><b></b></td><td align="left" valign="top"><p>Void returns are permitted by the C++ standard, as in this code snippet:
</p><pre class="programlisting">void f();
void g() { return f(); }</pre><p> This is a valid usage of <tt class="computeroutput">boost::function</tt> because void returns are not used. With void returns, we would attempting to compile ill-formed code similar to:
</p><pre class="programlisting">int f();
void g() { return f(); }</pre><p> In essence, not using void returns allows
<tt class="computeroutput">boost::function</tt> to swallow a return value. This is
consistent with allowing the user to assign and invoke functions and
function objects with parameters that don't exactly match.</p></td></tr><tr class="question"><td align="left" valign="top"><a name="id2517475"></a><a name="id2517476"></a><b>4. </b></td><td align="left" valign="top"><p>Why (function) cloning?</p></td></tr><tr class="answer"><td align="left" valign="top"><b></b></td><td align="left" valign="top"><p>In November and December of 2000, the issue of cloning
      vs. reference counting was debated at length and it was decided
      that cloning gave more predictable semantics. I won't rehash the
      discussion here, but if it cloning is incorrect for a particular
      application a reference-counting allocator could be used.</p></td></tr></tbody></table></div></div><table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr><td align="left"><small>Last revised: October 12, 2003 at 16:02:26 GMT</small></td><td align="right"><small>Copyright © 2001-2003 Douglas Gregor</small></td></tr></table><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="class.boost.function.html"><img src="images/prev.png" alt="Prev"></a> </td><td width="20%" align="center"><a accesskey="u" href="function.html"><img src="images/up.png" alt="Up"></a></td><td width="40%" align="right"> <a accesskey="n" href="function.misc.html"><img src="images/next.png" alt="Next"></a></td></tr><tr><td width="40%" align="left" valign="top">Class template function </td><td width="20%" align="center"><a accesskey="h" href="index.html"><img src="images/home.png" alt="Home"></a></td><td width="40%" align="right" valign="top"> Miscellaneous Notes</td></tr></table></div></body></html>
